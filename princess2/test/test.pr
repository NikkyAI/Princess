print(">Testing loops\n")

var i = 0
while i < 10 {
    print(i)
    i += 1
}
print("\n")

for var i in 0..10 {
    print(i)
}
print("\n")

print(">Testing imports\n")

import test::a as A
import test::b

assert(A::multiply_by_2(10) == 20)
let a, b = return_multiple()
assert(a == 10)
assert(b == 20)

print(">Testing print\n")
print("Hello World ", 1, " ", 'x', " ", 10.5, " ", *a, "\n")

print(">Testing function calls\n")

def pass_dynamic_array(a: string) {
    print(a)
}

pass_dynamic_array("Some string\n")
pass_dynamic_array(a = "Named parameter\n")

def function(a: int, b: double) -> double { return a * b }
def function(b: double, a: int) -> double { return a * b }

function(2, 1.5)
function(1.5, 2)
function(2, b = 1.5)
function(1.5, a = 2)
// function(a = 1, b = 1.5) # Ambiguous reference

print(">Testing length\n")
let c = "Some string"
assert(length(c) == 11)

print(">Testing allocate\n")
let d = allocate(size_of int) !*int
@d = 10
assert(@d == 10)
free(d)

let e = allocate(int)
@e = 20
assert(@e == 20)
free(e)

let f = allocate(int, 10)
f[0] = 10
f[9] = 20
assert(f[0] == 10)
assert(f[9] == 20)
free(f)

print(">Testing file functions\n")
let fp = open("bin/test_file_io_text", "w+")
close(fp)